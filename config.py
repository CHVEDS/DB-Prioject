"""
Configuration module for banking report analysis.

This module contains constants, thresholds, and mapping dictionaries
for bank accounting codes used in financial statements parsing.
"""

from typing import Dict, List, Tuple


# Bank account codes mapping - Russian banking chart of accounts (COA)
BANK_ACCOUNT_CODES: Dict[str, str] = {
    # Assets
    "10101": "Касса кредитной организации",
    "10202": "Денежные средства в Банке России",
    "10203": "Денежные средства в кредитных организациях",
    "10302": "Средства в Банке России на correspondent'ских счетах",
    "10303": "Средства в кредитных организациях на correspondent'ских счетах",
    "10501": "Драгоценные металлы",
    "10601": "Драгоценные камни",
    "10801": "Собственные акции, выкупленные у акционеров",
    "10901": "Незавершенные строительные проекты",
    "11001": "Материалы",
    "11501": "Долговые ценные бумаги",
    "11502": "Долговые ценные бумаги, приобретенные для торговли",
    "11503": "Долговые ценные бумаги, предназначенные для продажи",
    "11504": "Долговые ценные бумаги, предназначенные для удержания до погашения",
    "11505": "Долговые ценные бумаги, предназначенные для продажи по справедливой стоимости",
    "11601": "Кредиты, предоставленные юридическим лицам",
    "11602": "Кредиты, предоставленные физическим лицам",
    "11603": "Кредиты, предоставленные бюджетным организациям",
    "11701": "Основные средства",
    "11801": "Нематериальные активы",
    "11901": "Отложенные налоговые активы",
    
    # Liabilities
    "20202": "Депозиты физических лиц",
    "20203": "Депозиты юридических лиц",
    "20204": "Депозиты бюджетных организаций",
    "20301": "Средства клиентов (депонентов)",
    "20501": "Кредиты, полученные от Банка России",
    "20502": "Кредиты, полученные от кредитных организаций",
    "20601": "Выпущенные облигации",
    "20801": "Уставный капитал",
    "20901": "Добавочный капитал",
    "21001": "Резервы под обесценение активов",
    "21101": "Нераспределенная прибыль (непокрытый убыток)",
    
    # Income Statement accounts
    "70601": "Процентные доходы",
    "70602": "Процентные расходы",
    "70701": "Комиссионные доходы",
    "70702": "Комиссионные расходы",
    "71101": "Доходы от операций с ценными бумагами",
    "71102": "Расходы от операций с ценными бумагами",
    "71501": "Доходы от участия в других организациях",
    "71601": "Внереализационные доходы",
    "71602": "Внереализационные расходы",
    "72501": "Расходы на оплату труда",
    "72601": "Отчисления на социальное страхование и обеспечение",
    "72701": "Амортизация",
    "73101": "Прочие операционные расходы",
    "73201": "Резервы под обесценение ценных бумаг",
    "73301": "Резервы под обесценение долговых требований",
    "73401": "Резервы под возможные потери по обязательствам",
    "73501": "Налог на прибыль"
}


# Balance sheet key items mapping for simplified identification
BALANCE_SHEET_ITEMS: Dict[str, str] = {
    "total_assets": ["11000", "11100", "11200", "11300", "11400", "11500", "11600", "11700", "11800", "11900"],
    "total_liabilities": ["21000", "21100", "21200", "21300", "21400", "21500", "21600", "21700", "21800", "21900"],
    "equity": ["20801", "20901", "21001", "21101"],
    "cash_and_equivalents": ["10101", "10202", "10302"],
    "loans_to_customers": ["11601", "11602", "11603"],
    "deposits_from_customers": ["20202", "20203", "20204", "20301"]
}


# Key performance indicators thresholds
RATIOS_THRESHOLDS: Dict[str, Tuple[float, float]] = {
    # Capital Adequacy (Basel III simplified)
    "capital_adequacy": (0.08, 0.12),  # Min 8%, Ideal 12%
    
    # Liquidity ratios
    "instant_liquidity": (0.15, 0.25),  # Min 15%, Ideal 25% 
    "current_liquidity": (1.0, 1.5),    # Min 1.0, Ideal 1.5
    
    # Profitability ratios
    "roe": (0.10, 0.15),                # Min 10%, Ideal 15%
    "roa": (0.01, 0.02),                # Min 1%, Ideal 2%
    "nim": (0.02, 0.04),                # Min 2%, Ideal 4%
    
    # Asset quality ratio
    "problem_loans_ratio": (0.05, 0.02) # Max 5%, Ideal 2% (reverse threshold)
}


# Financial statement sections identifiers
STATEMENT_SECTIONS: List[str] = [
    "balance_sheet",           # Balance Sheet
    "income_statement",       # Profit and Loss Statement
    "cash_flow",             # Cash Flow Statement
    "statement_of_changes_in_equity"  # Statement of Changes in Equity
]


# Supported file formats
SUPPORTED_FORMATS: List[str] = [
    ".pdf", ".docx", ".txt", ".md"
]